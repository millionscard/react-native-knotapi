{"version":3,"names":["_reactNative","require","LINKING_ERROR","Platform","select","ios","default","Knotapi","NativeModules","Proxy","get","Error","eventNames","exports","onSuccess","onError","onEvent","onExit","onFinished","eventEmitter","NativeEventEmitter","openCardOnFileSwitcher","params","InteractionManager","runAfterInteractions","setTimeout","openCardSwitcher","openSubscriptionManager","addSubscriptionManagerListener","eventName","callback","addListener","addCardSwitcherListener","updateCardSwitcherSessionId","sessionId","_default"],"sources":["index.ts"],"sourcesContent":["import {NativeModules, Platform, NativeEventEmitter, InteractionManager} from 'react-native';\n\nconst LINKING_ERROR =\n    `The package 'react-native-knotapi' doesn't seem to be linked. Make sure: \\n\\n` +\n    Platform.select({ios: \"- You have run 'pod install'\\n\", default: ''}) +\n    '- You rebuilt the app after installing the package\\n' +\n    '- You are not using Expo managed workflow\\n';\n\nconst Knotapi = NativeModules.Knotapi ? NativeModules.Knotapi : new Proxy(\n    {},\n    {\n        get() {\n            throw new Error(LINKING_ERROR);\n        },\n    }\n);\n\nexport const eventNames = {\n    onSuccess: 'onSuccess',\n    onError: 'onError',\n    onEvent: 'onEvent',\n    onExit: 'onExit',\n    onFinished: 'onFinished'\n} as const;\n\nconst eventEmitter = new NativeEventEmitter(Knotapi)\n\ntype CustomizationType = {\n    primaryColor?: string\n    textColor?: string\n    companyName?: string,\n    buttonCorners?: number,\n    buttonFontSize?: number,\n    buttonPaddings?: number,\n}\ntype CommonConfig = {\n    sessionId: string,\n    clientId: string,\n    merchantIds?: number[],\n    merchantNames?: string[],\n    customization?: CustomizationType,\n    environment: 'production' | 'sandbox' | 'development',\n    useCategories?: boolean,\n    logo?: string,\n    useSelection?: boolean,\n    useSearch?: boolean,\n    useSingleFlow?: boolean,\n    primaryColor?: string,\n    textColor?: string,\n    companyName?: string,\n    buttonCorners?: number,\n    buttonFontSize?: number,\n    buttonPaddings?: number,\n    entryPoint?: string,\n}\nexport const openCardOnFileSwitcher = (params: CommonConfig) => {\n    InteractionManager.runAfterInteractions(() => {\n        setTimeout(() => {\n            Knotapi?.openCardSwitcher(params);\n        }, 50)\n    });\n}\n\nexport const openSubscriptionManager = (params: CommonConfig) => {\n    InteractionManager.runAfterInteractions(() => {\n        setTimeout(() => {\n            Knotapi?.openSubscriptionManager(params);\n        }, 50)\n    });\n}\n\ntype EventNames = keyof typeof eventNames\nexport const addSubscriptionManagerListener = (eventName: EventNames, callback: (event: any) => void) => {\n    return eventEmitter.addListener(`SubscriptionManager-${eventName}`, callback)\n}\nexport const addCardSwitcherListener = (eventName: EventNames, callback: (event: any) => void) => {\n    return eventEmitter.addListener(`CardSwitcher-${eventName}`, callback)\n}\nexport const updateCardSwitcherSessionId = (sessionId: string) => {\n    Knotapi?.updateCardSwitcherSessionId(sessionId);\n}\n\nexport default Knotapi;\n"],"mappings":";;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AAEA,MAAMC,aAAa,GACf,+EAA+E,GAC/EC,qBAAQ,CAACC,MAAM,CAAC;EAACC,GAAG,EAAE,gCAAgC;EAAEC,OAAO,EAAE;AAAE,CAAC,CAAC,GACrE,sDAAsD,GACtD,6CAA6C;AAEjD,MAAMC,OAAO,GAAGC,0BAAa,CAACD,OAAO,GAAGC,0BAAa,CAACD,OAAO,GAAG,IAAIE,KAAK,CACrE,CAAC,CAAC,EACF;EACIC,GAAGA,CAAA,EAAG;IACF,MAAM,IAAIC,KAAK,CAACT,aAAa,CAAC;EAClC;AACJ,CACJ,CAAC;AAEM,MAAMU,UAAU,GAAAC,OAAA,CAAAD,UAAA,GAAG;EACtBE,SAAS,EAAE,WAAW;EACtBC,OAAO,EAAE,SAAS;EAClBC,OAAO,EAAE,SAAS;EAClBC,MAAM,EAAE,QAAQ;EAChBC,UAAU,EAAE;AAChB,CAAU;AAEV,MAAMC,YAAY,GAAG,IAAIC,+BAAkB,CAACb,OAAO,CAAC;AA8B7C,MAAMc,sBAAsB,GAAIC,MAAoB,IAAK;EAC5DC,+BAAkB,CAACC,oBAAoB,CAAC,MAAM;IAC1CC,UAAU,CAAC,MAAM;MACblB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEmB,gBAAgB,CAACJ,MAAM,CAAC;IACrC,CAAC,EAAE,EAAE,CAAC;EACV,CAAC,CAAC;AACN,CAAC;AAAAT,OAAA,CAAAQ,sBAAA,GAAAA,sBAAA;AAEM,MAAMM,uBAAuB,GAAIL,MAAoB,IAAK;EAC7DC,+BAAkB,CAACC,oBAAoB,CAAC,MAAM;IAC1CC,UAAU,CAAC,MAAM;MACblB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEoB,uBAAuB,CAACL,MAAM,CAAC;IAC5C,CAAC,EAAE,EAAE,CAAC;EACV,CAAC,CAAC;AACN,CAAC;AAAAT,OAAA,CAAAc,uBAAA,GAAAA,uBAAA;AAGM,MAAMC,8BAA8B,GAAGA,CAACC,SAAqB,EAAEC,QAA8B,KAAK;EACrG,OAAOX,YAAY,CAACY,WAAW,CAAC,uBAAuBF,SAAS,EAAE,EAAEC,QAAQ,CAAC;AACjF,CAAC;AAAAjB,OAAA,CAAAe,8BAAA,GAAAA,8BAAA;AACM,MAAMI,uBAAuB,GAAGA,CAACH,SAAqB,EAAEC,QAA8B,KAAK;EAC9F,OAAOX,YAAY,CAACY,WAAW,CAAC,gBAAgBF,SAAS,EAAE,EAAEC,QAAQ,CAAC;AAC1E,CAAC;AAAAjB,OAAA,CAAAmB,uBAAA,GAAAA,uBAAA;AACM,MAAMC,2BAA2B,GAAIC,SAAiB,IAAK;EAC9D3B,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAE0B,2BAA2B,CAACC,SAAS,CAAC;AACnD,CAAC;AAAArB,OAAA,CAAAoB,2BAAA,GAAAA,2BAAA;AAAA,IAAAE,QAAA,GAAAtB,OAAA,CAAAP,OAAA,GAEcC,OAAO","ignoreList":[]}