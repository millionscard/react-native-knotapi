{"version":3,"names":["LINKING_ERROR","Platform","select","ios","default","Knotapi","NativeModules","Proxy","get","Error","eventNames","onSuccess","onError","onEvent","onExit","onFinished","eventEmitter","NativeEventEmitter","openCardOnFileSwitcher","params","InteractionManager","runAfterInteractions","setTimeout","openCardSwitcher","openSubscriptionCanceler","addSubscriptionCancelerListener","eventName","callback","addListener","addCardSwitcherListener","updateCardSwitcherSessionId","sessionId"],"sources":["index.ts"],"sourcesContent":["import {NativeModules, Platform, NativeEventEmitter, InteractionManager} from 'react-native';\n\nconst LINKING_ERROR =\n    `The package 'react-native-knotapi' doesn't seem to be linked. Make sure: \\n\\n` +\n    Platform.select({ios: \"- You have run 'pod install'\\n\", default: ''}) +\n    '- You rebuilt the app after installing the package\\n' +\n    '- You are not using Expo managed workflow\\n';\n\nconst Knotapi = NativeModules.Knotapi ? NativeModules.Knotapi : new Proxy(\n    {},\n    {\n        get() {\n            throw new Error(LINKING_ERROR);\n        },\n    }\n);\n\nexport const eventNames = {\n    onSuccess: 'onSuccess',\n    onError: 'onError',\n    onEvent: 'onEvent',\n    onExit: 'onExit',\n    onFinished: 'onFinished'\n} as const;\n\nconst eventEmitter = new NativeEventEmitter(Knotapi)\n\ntype CustomizationType = {\n    primaryColor?: string\n    textColor?: string\n    companyName?: string,\n    buttonCorners?: number,\n    buttonFontSize?: number,\n    buttonPaddings?: number,\n}\ntype CommonConfig = {\n    sessionId: string,\n    clientId: string,\n    merchantIds?: number[],\n    merchantNames?: string[],\n    customization?: CustomizationType,\n    environment: 'production' | 'sandbox' | 'development',\n    useCategories?: boolean,\n    logo?: string,\n    useSelection?: boolean,\n    useSearch?: boolean,\n    useSingleFlow?: boolean,\n    primaryColor?: string,\n    textColor?: string,\n    companyName?: string,\n    buttonCorners?: number,\n    buttonFontSize?: number,\n    buttonPaddings?: number,\n    entryPoint?: string,\n}\ntype CardOnFileSwitcherParams = CommonConfig\ntype SubscriptionCancelerParams = { amount?: boolean, } & CommonConfig\nexport const openCardOnFileSwitcher = (params: CardOnFileSwitcherParams) => {\n    InteractionManager.runAfterInteractions(() => {\n        setTimeout(() => {\n            Knotapi?.openCardSwitcher(params);\n        }, 50)\n    });\n}\n\nexport const openSubscriptionCanceler = (params: SubscriptionCancelerParams) => {\n    InteractionManager.runAfterInteractions(() => {\n        setTimeout(() => {\n            Knotapi?.openSubscriptionCanceler(params);\n        }, 50)\n    });\n}\n\ntype EventNames = keyof typeof eventNames\nexport const addSubscriptionCancelerListener = (eventName: EventNames, callback: (event: any) => void) => {\n    return eventEmitter.addListener(`SubscriptionCanceler-${eventName}`, callback)\n}\nexport const addCardSwitcherListener = (eventName: EventNames, callback: (event: any) => void) => {\n    return eventEmitter.addListener(`CardSwitcher-${eventName}`, callback)\n}\nexport const updateCardSwitcherSessionId = (sessionId: string) => {\n    Knotapi?.updateCardSwitcherSessionId(sessionId);\n}\n\nexport default Knotapi;\n"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,aAAa,GACd,+EAAD,GACAC,qBAAA,CAASC,MAAT,CAAgB;EAACC,GAAG,EAAE,gCAAN;EAAwCC,OAAO,EAAE;AAAjD,CAAhB,CADA,GAEA,sDAFA,GAGA,6CAJJ;AAMA,MAAMC,OAAO,GAAGC,0BAAA,CAAcD,OAAd,GAAwBC,0BAAA,CAAcD,OAAtC,GAAgD,IAAIE,KAAJ,CAC5D,EAD4D,EAE5D;EACIC,GAAG,GAAG;IACF,MAAM,IAAIC,KAAJ,CAAUT,aAAV,CAAN;EACH;;AAHL,CAF4D,CAAhE;AASO,MAAMU,UAAU,GAAG;EACtBC,SAAS,EAAE,WADW;EAEtBC,OAAO,EAAE,SAFa;EAGtBC,OAAO,EAAE,SAHa;EAItBC,MAAM,EAAE,QAJc;EAKtBC,UAAU,EAAE;AALU,CAAnB;;AAQP,MAAMC,YAAY,GAAG,IAAIC,+BAAJ,CAAuBZ,OAAvB,CAArB;;AAgCO,MAAMa,sBAAsB,GAAIC,MAAD,IAAsC;EACxEC,+BAAA,CAAmBC,oBAAnB,CAAwC,MAAM;IAC1CC,UAAU,CAAC,MAAM;MACbjB,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEkB,gBAAT,CAA0BJ,MAA1B;IACH,CAFS,EAEP,EAFO,CAAV;EAGH,CAJD;AAKH,CANM;;;;AAQA,MAAMK,wBAAwB,GAAIL,MAAD,IAAwC;EAC5EC,+BAAA,CAAmBC,oBAAnB,CAAwC,MAAM;IAC1CC,UAAU,CAAC,MAAM;MACbjB,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEmB,wBAAT,CAAkCL,MAAlC;IACH,CAFS,EAEP,EAFO,CAAV;EAGH,CAJD;AAKH,CANM;;;;AASA,MAAMM,+BAA+B,GAAG,CAACC,SAAD,EAAwBC,QAAxB,KAA2D;EACtG,OAAOX,YAAY,CAACY,WAAb,CAA0B,wBAAuBF,SAAU,EAA3D,EAA8DC,QAA9D,CAAP;AACH,CAFM;;;;AAGA,MAAME,uBAAuB,GAAG,CAACH,SAAD,EAAwBC,QAAxB,KAA2D;EAC9F,OAAOX,YAAY,CAACY,WAAb,CAA0B,gBAAeF,SAAU,EAAnD,EAAsDC,QAAtD,CAAP;AACH,CAFM;;;;AAGA,MAAMG,2BAA2B,GAAIC,SAAD,IAAuB;EAC9D1B,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEyB,2BAAT,CAAqCC,SAArC;AACH,CAFM;;;eAIQ1B,O"}