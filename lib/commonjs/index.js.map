{"version":3,"names":["LINKING_ERROR","Platform","select","ios","default","Knotapi","NativeModules","Proxy","get","Error","eventNames","onSuccess","onError","onEvent","onExit","onFinished","eventEmitter","NativeEventEmitter","openCardOnFileSwitcher","params","openCardSwitcher","openSubscriptionCanceler","addSubscriptionCancelerListener","eventName","callback","addListener","addCardSwitcherListener"],"sources":["index.ts"],"sourcesContent":["import {NativeModules, Platform, NativeEventEmitter} from 'react-native';\n\nconst LINKING_ERROR =\n    `The package 'react-native-knotapi' doesn't seem to be linked. Make sure: \\n\\n` +\n    Platform.select({ios: \"- You have run 'pod install'\\n\", default: ''}) +\n    '- You rebuilt the app after installing the package\\n' +\n    '- You are not using Expo managed workflow\\n';\n\nconst Knotapi = NativeModules.Knotapi ? NativeModules.Knotapi : new Proxy(\n    {},\n    {\n        get() {\n            throw new Error(LINKING_ERROR);\n        },\n    }\n);\n\nexport const eventNames = {\n    onSuccess: 'onSuccess',\n    onError: 'onError',\n    onEvent: 'onEvent',\n    onExit: 'onExit',\n    onFinished: 'onFinished'\n} as const;\n\nconst eventEmitter = new NativeEventEmitter(Knotapi)\n\ntype CustomizationType = {\n    primaryColor?: string\n    textColor?: string\n    companyName?: string\n}\ntype CardOnFileSwitcherParams = { sessionId: string, clientId: string, merchantIds?: number[], merchantNames?: string[], customization: CustomizationType, environment: 'production' | 'sandbox' }\ntype SubscriptionCancelerParams = { sessionId: string, clientId: string, merchantIds?: number[], merchantNames?: string[], amount?: boolean, customization: CustomizationType, environment: 'production' | 'sandbox' }\nexport const openCardOnFileSwitcher = async (params: CardOnFileSwitcherParams) => {\n    return Knotapi?.openCardSwitcher(params);\n}\n\nexport const openSubscriptionCanceler = async (params: SubscriptionCancelerParams) => {\n    return Knotapi?.openSubscriptionCanceler(params);\n}\n\ntype EventNames = keyof typeof eventNames\nexport const addSubscriptionCancelerListener = (eventName: EventNames, callback: (event: any) => void) => {\n    return eventEmitter.addListener(`SubscriptionCanceler-${eventName}`, callback)\n}\nexport const addCardSwitcherListener = (eventName: EventNames, callback: (event: any) => void) => {\n    return eventEmitter.addListener(`CardSwitcher-${eventName}`, callback)\n}\n\nexport default Knotapi;\n"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,aAAa,GACd,+EAAD,GACAC,qBAAA,CAASC,MAAT,CAAgB;EAACC,GAAG,EAAE,gCAAN;EAAwCC,OAAO,EAAE;AAAjD,CAAhB,CADA,GAEA,sDAFA,GAGA,6CAJJ;AAMA,MAAMC,OAAO,GAAGC,0BAAA,CAAcD,OAAd,GAAwBC,0BAAA,CAAcD,OAAtC,GAAgD,IAAIE,KAAJ,CAC5D,EAD4D,EAE5D;EACIC,GAAG,GAAG;IACF,MAAM,IAAIC,KAAJ,CAAUT,aAAV,CAAN;EACH;;AAHL,CAF4D,CAAhE;AASO,MAAMU,UAAU,GAAG;EACtBC,SAAS,EAAE,WADW;EAEtBC,OAAO,EAAE,SAFa;EAGtBC,OAAO,EAAE,SAHa;EAItBC,MAAM,EAAE,QAJc;EAKtBC,UAAU,EAAE;AALU,CAAnB;;AAQP,MAAMC,YAAY,GAAG,IAAIC,+BAAJ,CAAuBZ,OAAvB,CAArB;;AASO,MAAMa,sBAAsB,GAAG,MAAOC,MAAP,IAA4C;EAC9E,OAAOd,OAAP,aAAOA,OAAP,uBAAOA,OAAO,CAAEe,gBAAT,CAA0BD,MAA1B,CAAP;AACH,CAFM;;;;AAIA,MAAME,wBAAwB,GAAG,MAAOF,MAAP,IAA8C;EAClF,OAAOd,OAAP,aAAOA,OAAP,uBAAOA,OAAO,CAAEgB,wBAAT,CAAkCF,MAAlC,CAAP;AACH,CAFM;;;;AAKA,MAAMG,+BAA+B,GAAG,CAACC,SAAD,EAAwBC,QAAxB,KAA2D;EACtG,OAAOR,YAAY,CAACS,WAAb,CAA0B,wBAAuBF,SAAU,EAA3D,EAA8DC,QAA9D,CAAP;AACH,CAFM;;;;AAGA,MAAME,uBAAuB,GAAG,CAACH,SAAD,EAAwBC,QAAxB,KAA2D;EAC9F,OAAOR,YAAY,CAACS,WAAb,CAA0B,gBAAeF,SAAU,EAAnD,EAAsDC,QAAtD,CAAP;AACH,CAFM;;;eAIQnB,O"}