{"version":3,"names":["_reactNative","require","LINKING_ERROR","Platform","select","ios","default","Knotapi","NativeModules","Proxy","get","Error","eventNames","exports","onSuccess","onError","onEvent","onExit","eventEmitter","NativeEventEmitter","openCardOnFileSwitcher","params","InteractionManager","runAfterInteractions","setTimeout","openCardSwitcher","openSubscriptionCanceler","addSubscriptionCancelerListener","eventName","callback","addListener","addCardSwitcherListener","updateCardSwitcherSessionId","sessionId","_default"],"sources":["index.ts"],"sourcesContent":["import {NativeModules, Platform, NativeEventEmitter, InteractionManager} from 'react-native';\n\nconst LINKING_ERROR =\n    `The package 'react-native-knotapi' doesn't seem to be linked. Make sure: \\n\\n` +\n    Platform.select({ios: \"- You have run 'pod install'\\n\", default: ''}) +\n    '- You rebuilt the app after installing the package\\n' +\n    '- You are not using Expo managed workflow\\n';\n\nconst Knotapi = NativeModules.Knotapi ? NativeModules.Knotapi : new Proxy(\n    {},\n    {\n        get() {\n            throw new Error(LINKING_ERROR);\n        },\n    }\n);\n\nexport const eventNames = {\n    onSuccess: 'onSuccess',\n    onError: 'onError',\n    onEvent: 'onEvent',\n    onExit: 'onExit'\n} as const;\n\nconst eventEmitter = new NativeEventEmitter(Knotapi)\n\ntype CommonConfig = {\n    sessionId: string,\n    clientId: string,\n    merchantIds?: number[],\n    merchantNames?: string[],\n    environment: 'production' | 'sandbox' | 'development',\n    useCategories?: boolean,\n    useSearch?: boolean,\n    entryPoint?: string,\n}\ntype CardOnFileSwitcherParams = CommonConfig\ntype SubscriptionCancelerParams = { amount?: boolean, } & CommonConfig\nexport const openCardOnFileSwitcher = (params: CardOnFileSwitcherParams) => {\n    InteractionManager.runAfterInteractions(() => {\n        setTimeout(() => {\n            Knotapi?.openCardSwitcher(params);\n        }, 50)\n    });\n}\n\nexport const openSubscriptionCanceler = (params: SubscriptionCancelerParams) => {\n    InteractionManager.runAfterInteractions(() => {\n        setTimeout(() => {\n            Knotapi?.openSubscriptionCanceler(params);\n        }, 50)\n    });\n}\n\ntype EventNames = keyof typeof eventNames\nexport const addSubscriptionCancelerListener = (eventName: EventNames, callback: (event: any) => void) => {\n    return eventEmitter.addListener(`SubscriptionCanceler-${eventName}`, callback)\n}\nexport const addCardSwitcherListener = (eventName: EventNames, callback: (event: any) => void) => {\n    return eventEmitter.addListener(`CardSwitcher-${eventName}`, callback)\n}\nexport const updateCardSwitcherSessionId = (sessionId: string) => {\n    Knotapi?.updateCardSwitcherSessionId(sessionId);\n}\n\nexport default Knotapi;\n"],"mappings":";;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AAEA,MAAMC,aAAa,GACf,+EAA+E,GAC/EC,qBAAQ,CAACC,MAAM,CAAC;EAACC,GAAG,EAAE,gCAAgC;EAAEC,OAAO,EAAE;AAAE,CAAC,CAAC,GACrE,sDAAsD,GACtD,6CAA6C;AAEjD,MAAMC,OAAO,GAAGC,0BAAa,CAACD,OAAO,GAAGC,0BAAa,CAACD,OAAO,GAAG,IAAIE,KAAK,CACrE,CAAC,CAAC,EACF;EACIC,GAAGA,CAAA,EAAG;IACF,MAAM,IAAIC,KAAK,CAACT,aAAa,CAAC;EAClC;AACJ,CACJ,CAAC;AAEM,MAAMU,UAAU,GAAAC,OAAA,CAAAD,UAAA,GAAG;EACtBE,SAAS,EAAE,WAAW;EACtBC,OAAO,EAAE,SAAS;EAClBC,OAAO,EAAE,SAAS;EAClBC,MAAM,EAAE,QAAQ;EAChBC,UAAU,EAAE;AAChB,CAAU;AAEV,MAAMC,YAAY,GAAG,IAAIC,+BAAkB,CAACb,OAAO,CAAC;AAgC7C,MAAMc,sBAAsB,GAAIC,MAAgC,IAAK;EACxEC,+BAAkB,CAACC,oBAAoB,CAAC,MAAM;IAC1CC,UAAU,CAAC,MAAM;MACblB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEmB,gBAAgB,CAACJ,MAAM,CAAC;IACrC,CAAC,EAAE,EAAE,CAAC;EACV,CAAC,CAAC;AACN,CAAC;AAAAT,OAAA,CAAAQ,sBAAA,GAAAA,sBAAA;AAEM,MAAMM,wBAAwB,GAAIL,MAAkC,IAAK;EAC5EC,+BAAkB,CAACC,oBAAoB,CAAC,MAAM;IAC1CC,UAAU,CAAC,MAAM;MACblB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEoB,wBAAwB,CAACL,MAAM,CAAC;IAC7C,CAAC,EAAE,EAAE,CAAC;EACV,CAAC,CAAC;AACN,CAAC;AAAAT,OAAA,CAAAc,wBAAA,GAAAA,wBAAA;AAGM,MAAMC,+BAA+B,GAAGA,CAACC,SAAqB,EAAEC,QAA8B,KAAK;EACtG,OAAOX,YAAY,CAACY,WAAW,CAAC,wBAAwBF,SAAS,EAAE,EAAEC,QAAQ,CAAC;AAClF,CAAC;AAAAjB,OAAA,CAAAe,+BAAA,GAAAA,+BAAA;AACM,MAAMI,uBAAuB,GAAGA,CAACH,SAAqB,EAAEC,QAA8B,KAAK;EAC9F,OAAOX,YAAY,CAACY,WAAW,CAAC,gBAAgBF,SAAS,EAAE,EAAEC,QAAQ,CAAC;AAC1E,CAAC;AAAAjB,OAAA,CAAAmB,uBAAA,GAAAA,uBAAA;AACM,MAAMC,2BAA2B,GAAIC,SAAiB,IAAK;EAC9D3B,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAE0B,2BAA2B,CAACC,SAAS,CAAC;AACnD,CAAC;AAAArB,OAAA,CAAAoB,2BAAA,GAAAA,2BAAA;AAAA,IAAAE,QAAA,GAAAtB,OAAA,CAAAP,OAAA,GAEcC,OAAO","ignoreList":[]}
