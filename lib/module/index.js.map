{"version":3,"names":["NativeModules","Platform","NativeEventEmitter","InteractionManager","LINKING_ERROR","select","ios","default","Knotapi","Proxy","get","Error","eventNames","onSuccess","onError","onEvent","onExit","onFinished","eventEmitter","openCardOnFileSwitcher","params","runAfterInteractions","setTimeout","openCardSwitcher","openSubscriptionManager","addSubscriptionManagerListener","eventName","callback","addListener","addCardSwitcherListener"],"sources":["index.ts"],"sourcesContent":["import {NativeModules, Platform, NativeEventEmitter, InteractionManager} from 'react-native';\n\nconst LINKING_ERROR =\n    `The package 'react-native-knotapi' doesn't seem to be linked. Make sure: \\n\\n` +\n    Platform.select({ios: \"- You have run 'pod install'\\n\", default: ''}) +\n    '- You rebuilt the app after installing the package\\n' +\n    '- You are not using Expo managed workflow\\n';\n\nconst Knotapi = NativeModules.Knotapi ? NativeModules.Knotapi : new Proxy(\n    {},\n    {\n        get() {\n            throw new Error(LINKING_ERROR);\n        },\n    }\n);\n\nexport const eventNames = {\n    onSuccess: 'onSuccess',\n    onError: 'onError',\n    onEvent: 'onEvent',\n    onExit: 'onExit',\n    onFinished: 'onFinished'\n} as const;\n\nconst eventEmitter = new NativeEventEmitter(Knotapi)\n\ntype CustomizationType = {\n    primaryColor?: string\n    textColor?: string\n    companyName?: string,\n    buttonCorners?: number,\n    buttonFontSize?: number,\n    buttonPaddings?: number,\n}\ntype CommonConfig = {\n    sessionId: string,\n    clientId: string,\n    merchantIds?: number[],\n    merchantNames?: string[],\n    customization?: CustomizationType,\n    environment: 'production' | 'sandbox' | 'development',\n    useCategories?: boolean,\n    logo?: string,\n    useSelection?: boolean,\n    useSearch?: boolean,\n    useSingleFlow?: boolean,\n    primaryColor?: string,\n    textColor?: string,\n    companyName?: string,\n    buttonCorners?: number,\n    buttonFontSize?: number,\n    buttonPaddings?: number,\n}\nexport const openCardOnFileSwitcher = (params: CommonConfig) => {\n    InteractionManager.runAfterInteractions(() => {\n        setTimeout(() => {\n            Knotapi?.openCardSwitcher(params);\n        }, 50)\n    });\n}\n\nexport const openSubscriptionManager = (params: CommonConfig) => {\n    InteractionManager.runAfterInteractions(() => {\n        setTimeout(() => {\n            Knotapi?.openSubscriptionManager(params);\n        }, 50)\n    });\n}\n\ntype EventNames = keyof typeof eventNames\nexport const addSubscriptionManagerListener = (eventName: EventNames, callback: (event: any) => void) => {\n    return eventEmitter.addListener(`SubscriptionManager-${eventName}`, callback)\n}\nexport const addCardSwitcherListener = (eventName: EventNames, callback: (event: any) => void) => {\n    return eventEmitter.addListener(`CardSwitcher-${eventName}`, callback)\n}\n\nexport default Knotapi;\n"],"mappings":"AAAA,SAAQA,aAAR,EAAuBC,QAAvB,EAAiCC,kBAAjC,EAAqDC,kBAArD,QAA8E,cAA9E;AAEA,MAAMC,aAAa,GACd,+EAAD,GACAH,QAAQ,CAACI,MAAT,CAAgB;EAACC,GAAG,EAAE,gCAAN;EAAwCC,OAAO,EAAE;AAAjD,CAAhB,CADA,GAEA,sDAFA,GAGA,6CAJJ;AAMA,MAAMC,OAAO,GAAGR,aAAa,CAACQ,OAAd,GAAwBR,aAAa,CAACQ,OAAtC,GAAgD,IAAIC,KAAJ,CAC5D,EAD4D,EAE5D;EACIC,GAAG,GAAG;IACF,MAAM,IAAIC,KAAJ,CAAUP,aAAV,CAAN;EACH;;AAHL,CAF4D,CAAhE;AASA,OAAO,MAAMQ,UAAU,GAAG;EACtBC,SAAS,EAAE,WADW;EAEtBC,OAAO,EAAE,SAFa;EAGtBC,OAAO,EAAE,SAHa;EAItBC,MAAM,EAAE,QAJc;EAKtBC,UAAU,EAAE;AALU,CAAnB;AAQP,MAAMC,YAAY,GAAG,IAAIhB,kBAAJ,CAAuBM,OAAvB,CAArB;AA+BA,OAAO,MAAMW,sBAAsB,GAAIC,MAAD,IAAsC;EACxEjB,kBAAkB,CAACkB,oBAAnB,CAAwC,MAAM;IAC1CC,UAAU,CAAC,MAAM;MACbd,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEe,gBAAT,CAA0BH,MAA1B;IACH,CAFS,EAEP,EAFO,CAAV;EAGH,CAJD;AAKH,CANM;AAQP,OAAO,MAAMI,wBAAwB,GAAIJ,MAAD,IAAwC;EAC5EjB,kBAAkB,CAACkB,oBAAnB,CAAwC,MAAM;IAC1CC,UAAU,CAAC,MAAM;MACbd,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEgB,wBAAT,CAAkCJ,MAAlC;IACH,CAFS,EAEP,EAFO,CAAV;EAGH,CAJD;AAKH,CANM;AASP,OAAO,MAAMK,+BAA+B,GAAG,CAACC,SAAD,EAAwBC,QAAxB,KAA2D;EACtG,OAAOT,YAAY,CAACU,WAAb,CAA0B,wBAAuBF,SAAU,EAA3D,EAA8DC,QAA9D,CAAP;AACH,CAFM;AAGP,OAAO,MAAME,uBAAuB,GAAG,CAACH,SAAD,EAAwBC,QAAxB,KAA2D;EAC9F,OAAOT,YAAY,CAACU,WAAb,CAA0B,gBAAeF,SAAU,EAAnD,EAAsDC,QAAtD,CAAP;AACH,CAFM;AAIP,eAAenB,OAAf"}