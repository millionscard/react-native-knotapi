{"version":3,"names":["NativeModules","Platform","NativeEventEmitter","InteractionManager","LINKING_ERROR","select","ios","default","Knotapi","Proxy","get","Error","eventNames","onSuccess","onError","onEvent","onExit","onFinished","eventEmitter","openCardOnFileSwitcher","params","runAfterInteractions","setTimeout","openCardSwitcher","openSubscriptionCanceler","addSubscriptionCancelerListener","eventName","callback","addListener","addCardSwitcherListener","updateCardSwitcherSessionId","sessionId"],"sources":["index.ts"],"sourcesContent":["import {NativeModules, Platform, NativeEventEmitter, InteractionManager} from 'react-native';\n\nconst LINKING_ERROR =\n    `The package 'react-native-knotapi' doesn't seem to be linked. Make sure: \\n\\n` +\n    Platform.select({ios: \"- You have run 'pod install'\\n\", default: ''}) +\n    '- You rebuilt the app after installing the package\\n' +\n    '- You are not using Expo managed workflow\\n';\n\nconst Knotapi = NativeModules.Knotapi ? NativeModules.Knotapi : new Proxy(\n    {},\n    {\n        get() {\n            throw new Error(LINKING_ERROR);\n        },\n    }\n);\n\nexport const eventNames = {\n    onSuccess: 'onSuccess',\n    onError: 'onError',\n    onEvent: 'onEvent',\n    onExit: 'onExit',\n    onFinished: 'onFinished'\n} as const;\n\nconst eventEmitter = new NativeEventEmitter(Knotapi)\n\ntype CustomizationType = {\n    primaryColor?: string\n    textColor?: string\n    companyName?: string,\n    buttonCorners?: number,\n    buttonFontSize?: number,\n    buttonPaddings?: number,\n}\ntype CommonConfig = {\n    sessionId: string,\n    clientId: string,\n    merchantIds?: number[],\n    merchantNames?: string[],\n    customization?: CustomizationType,\n    environment: 'production' | 'sandbox' | 'development',\n    useCategories?: boolean,\n    logo?: string,\n    useSelection?: boolean,\n    useSearch?: boolean,\n    useSingleFlow?: boolean,\n    primaryColor?: string,\n    textColor?: string,\n    companyName?: string,\n    buttonCorners?: number,\n    buttonFontSize?: number,\n    buttonPaddings?: number,\n    entryPoint?: string,\n}\ntype CardOnFileSwitcherParams = CommonConfig\ntype SubscriptionCancelerParams = { amount?: boolean, } & CommonConfig\nexport const openCardOnFileSwitcher = (params: CardOnFileSwitcherParams) => {\n    InteractionManager.runAfterInteractions(() => {\n        setTimeout(() => {\n            Knotapi?.openCardSwitcher(params);\n        }, 50)\n    });\n}\n\nexport const openSubscriptionCanceler = (params: SubscriptionCancelerParams) => {\n    InteractionManager.runAfterInteractions(() => {\n        setTimeout(() => {\n            Knotapi?.openSubscriptionCanceler(params);\n        }, 50)\n    });\n}\n\ntype EventNames = keyof typeof eventNames\nexport const addSubscriptionCancelerListener = (eventName: EventNames, callback: (event: any) => void) => {\n    return eventEmitter.addListener(`SubscriptionCanceler-${eventName}`, callback)\n}\nexport const addCardSwitcherListener = (eventName: EventNames, callback: (event: any) => void) => {\n    return eventEmitter.addListener(`CardSwitcher-${eventName}`, callback)\n}\nexport const updateCardSwitcherSessionId = (sessionId: string) => {\n    Knotapi?.updateCardSwitcherSessionId(sessionId);\n}\n\nexport default Knotapi;\n"],"mappings":"AAAA,SAAQA,aAAa,EAAEC,QAAQ,EAAEC,kBAAkB,EAAEC,kBAAkB,QAAO,cAAc;AAE5F,MAAMC,aAAa,GACf,+EAA+E,GAC/EH,QAAQ,CAACI,MAAM,CAAC;EAACC,GAAG,EAAE,gCAAgC;EAAEC,OAAO,EAAE;AAAE,CAAC,CAAC,GACrE,sDAAsD,GACtD,6CAA6C;AAEjD,MAAMC,OAAO,GAAGR,aAAa,CAACQ,OAAO,GAAGR,aAAa,CAACQ,OAAO,GAAG,IAAIC,KAAK,CACrE,CAAC,CAAC,EACF;EACIC,GAAGA,CAAA,EAAG;IACF,MAAM,IAAIC,KAAK,CAACP,aAAa,CAAC;EAClC;AACJ,CACJ,CAAC;AAED,OAAO,MAAMQ,UAAU,GAAG;EACtBC,SAAS,EAAE,WAAW;EACtBC,OAAO,EAAE,SAAS;EAClBC,OAAO,EAAE,SAAS;EAClBC,MAAM,EAAE,QAAQ;EAChBC,UAAU,EAAE;AAChB,CAAU;AAEV,MAAMC,YAAY,GAAG,IAAIhB,kBAAkB,CAACM,OAAO,CAAC;AAgCpD,OAAO,MAAMW,sBAAsB,GAAIC,MAAgC,IAAK;EACxEjB,kBAAkB,CAACkB,oBAAoB,CAAC,MAAM;IAC1CC,UAAU,CAAC,MAAM;MACbd,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEe,gBAAgB,CAACH,MAAM,CAAC;IACrC,CAAC,EAAE,EAAE,CAAC;EACV,CAAC,CAAC;AACN,CAAC;AAED,OAAO,MAAMI,wBAAwB,GAAIJ,MAAkC,IAAK;EAC5EjB,kBAAkB,CAACkB,oBAAoB,CAAC,MAAM;IAC1CC,UAAU,CAAC,MAAM;MACbd,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEgB,wBAAwB,CAACJ,MAAM,CAAC;IAC7C,CAAC,EAAE,EAAE,CAAC;EACV,CAAC,CAAC;AACN,CAAC;AAGD,OAAO,MAAMK,+BAA+B,GAAGA,CAACC,SAAqB,EAAEC,QAA8B,KAAK;EACtG,OAAOT,YAAY,CAACU,WAAW,CAAC,wBAAwBF,SAAS,EAAE,EAAEC,QAAQ,CAAC;AAClF,CAAC;AACD,OAAO,MAAME,uBAAuB,GAAGA,CAACH,SAAqB,EAAEC,QAA8B,KAAK;EAC9F,OAAOT,YAAY,CAACU,WAAW,CAAC,gBAAgBF,SAAS,EAAE,EAAEC,QAAQ,CAAC;AAC1E,CAAC;AACD,OAAO,MAAMG,2BAA2B,GAAIC,SAAiB,IAAK;EAC9DvB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEsB,2BAA2B,CAACC,SAAS,CAAC;AACnD,CAAC;AAED,eAAevB,OAAO","ignoreList":[]}