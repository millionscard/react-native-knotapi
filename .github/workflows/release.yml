name: release
on: 
  push:
jobs:
  release:
    if: startsWith(github.ref, 'refs/tags/')
    runs-on: ubuntu-latest
    steps:
      - name: Build Changelog
        uses: mikepenz/release-changelog-builder-action@v3
        with:
          configurationJson: |
            {
              "categories": [
                {
                  "title": "## ğŸš€ Features",
                  "labels": ["feature"]
                },
                {
                  "title": "## ğŸ› Fixes",
                  "labels": ["fix"]
                },
                {
                  "title": "## ğŸ§ª Tests",
                  "labels": ["test"]
                },
                {
                  "title": "## ğŸ§ª Tests and some ğŸª„ Magic",
                  "labels": ["test", "magic"],
                  "exclude_labels": ["no-magic"],
                  "exhaustive": true,
                  "empty_content": "- no matching PRs",
                  "rules": [
                    {
                      "pattern": "open",
                      "on_property": "status",
                      "flags": "gu"
                    }
                  ]
                }
              ],
              "sort": {
                "order": "ASC",
                "on_property": "mergedAt"
              }
            }
        env:
          GITHUB_TOKEN: ${{ secrets.TOKEN }}
